<app-header></app-header>


<div class="container" style="margin-top: 8%;">
    <div class="">
        <div class="row justify-content-center">
          <div class="col-lg-8">
      
            <!-- Heading Centered -->
            <h4 class="text-center text-danger text-decoration-underline mb-4">
              Parcel Status Details
            </h4>
      
            <!-- Form -->
            <form 
              class="row gy-3 justify-content-center align-items-center"
              (ngSubmit)="searchUser(searchInput)"
              #searchForm="ngForm">
      
              <!-- Label -->
              <div class="col-12 col-md-4 text-md-end text-center">
                <label for="searchTerm" class="form-label fw-bold">GRN Number</label>
              </div>
      
              <!-- Input -->
              <div class="col-12 col-md-6">
                <input
                  type="text"
                  id="searchTerm"
                  name="searchTerm"
                  class="form-control"
                  placeholder="Enter GRN Number"
                  required
                  [(ngModel)]="searchTerm"
                  #searchInput="ngModel"
                />
                <div *ngIf="searchInput.invalid && searchInput.touched" class="text-danger small mt-1">
                  Please enter a valid GRN Number.
                </div>
              </div>
      
              <!-- Button -->
              <div class="col-12 col-md-2 text-center">
                <button class="btn btn-primary w-100" type="submit" [disabled]="searchForm.invalid">Load</button>
              </div>
      
            </form>
      
          </div>
        </div>
      </div>
      
      
  </div>


  
  
  <!-- Parcel Cards -->
  <div class="container" *ngFor="let user of data2">
    <!-- Parcel Details -->
    <div class="card shadow-sm border-info mb-4">
      <div class="card-header bg-info text-white fw-bold">Parcel Details (GRN No: {{ user.grnNo }})</div>
      <div class="card-body bg-light">
        <div class="row">
          <div class="col-12 col-md-6">
            <p><strong>GRN No:</strong> {{ user.grnNo }}</p>
            <p><strong>Status:</strong>
              <span [ngSwitch]="user.bookingStatus">
                <span *ngSwitchCase="0">Booking Branch</span>
                <span *ngSwitchCase="1">Departed / Shipped</span>
                <span *ngSwitchCase="2">Arrived at Delivery App</span>
                <span *ngSwitchCase="3">Parcel Missing</span>
                <span *ngSwitchCase="4">Delivered</span>
                <span *ngSwitchCase="5">Cancelled</span>
                <span *ngSwitchDefault>Unknown</span>
              </span>
            </p>
            <p><strong>From City:</strong> {{ user.fromCity }}</p>
            <p><strong>From Branch:</strong> {{ user.pickUpBranchname }}</p>
            <p><strong>Sender:</strong> {{ user.senderName }} ({{ user.senderMobile }})</p>
          </div>
          <div class="col-12 col-md-6">
            <p><strong>To City:</strong> {{ user.toCity }}</p>
            <p><strong>To Branch:</strong> {{ user.dropBranchname }}</p>
            <p><strong>Receiver:</strong> {{ user.receiverName }} ({{ user.receiverMobile }})</p>
            <p><strong>Booking Type:</strong> {{ user.bookingType }}</p>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Booking Details -->
    <div class="card shadow-sm border-success mb-4">
      <div class="card-header bg-success text-white fw-bold">Booking Details</div>
      <div class="card-body bg-light">
        <p><strong>Booking Date:</strong> {{ user.bookingDate | date: 'dd-MM-yyyy hh:mm a' }}</p>
        <p><strong>Booked By:</strong> {{ user.bookedBy }}</p>
        <p><strong>Booked Branch:</strong> {{ user.pickUpBranchname }}</p>
      </div>
    </div>
  
    <!-- Loading -->
    <div class="card shadow-sm border-warning mb-4">
      <div class="card-header bg-warning text-dark fw-bold">Loading Details</div>
      <div class="card-body bg-light">
        <p><strong>Loading Date:</strong> {{ user.loadingDate | date: 'dd-MM-yyyy hh:mm a' }}</p>
        <p><strong>Loaded By User:</strong> sk.mahesh</p>
      </div>
    </div>
  
    <!-- Unloading -->
    <div class="card shadow-sm border-primary mb-4">
      <div class="card-header bg-primary text-white fw-bold">Unloading Details</div>
      <div class="card-body bg-light">
        <p><strong>Unloading Date:</strong> {{ user.unloadingDate | date: 'dd-MM-yyyy hh:mm a' }}</p>
        <p><strong>Unloaded By:</strong> sk.naresh</p>
        <p><strong>Unloaded Branch:</strong> Lak-Di-Kapool</p>
      </div>
    </div>
  
    <!-- Delivery -->
    <div class="card shadow-sm border-danger mb-4">
      <div class="card-header bg-danger text-white fw-bold">Delivery Details</div>
      <div class="card-body bg-light">
        <p><strong>Delivery Date:</strong> {{ user.deliveryDate | date: 'dd-MM-yyyy hh:mm a' }}</p>
        <p><strong>Delivered By:</strong> {{ user.deliveryEmployee }}</p>
        <p><strong>Delivered Branch:</strong> {{ user.dropBranchname }}</p>
      </div>
    </div>
  </div>
  

