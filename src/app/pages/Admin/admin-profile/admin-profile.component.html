<app-header></app-header>
<div style="margin-top: 7%;"></div>
<div class="d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-lg border-0 rounded-4 w-75">
    <div class="card-body bg-white rounded-4">
      <h3 class="text-center mb-4 text-primary fw-bold">Profile Information</h3>
      <form [formGroup]="form">
        <div class="container pb-3">
          <div class="row g-4">
            <div class="col-md-6" *ngIf="form">
              <label class="form-label text-primary fw-semibold">Company Name</label>
              <input type="text" class="form-control border-primary" formControlName="companyName">
            </div>
            <div class="col-md-6">
              <label class="form-label text-success fw-semibold">Name</label>
              <input type="text" class="form-control border-success" formControlName="name">
            </div>
            <div class="col-md-6">
              <label class="form-label text-warning fw-semibold">Username</label>
              <input type="text" class="form-control border-warning" formControlName="username">
            </div>
            <div class="col-md-6">
              <label class="form-label text-info fw-semibold">Address</label>
              <textarea class="form-control border-info" formControlName="address" rows="2"></textarea>
            </div>
            <div class="col-md-6">
              <label class="form-label text-danger fw-semibold">Location</label>
              <input type="text" class="form-control border-danger" formControlName="location">
            </div>
            <div class="col-md-6">
              <label class="form-label text-secondary fw-semibold">Phone</label>
              <input type="text" class="form-control border-secondary" formControlName="phone">
            </div>
            <div class="col-md-6">
              <label class="form-label text-dark fw-semibold">Email</label>
              <input type="email" class="form-control border-dark" formControlName="email">
            </div>
            <div class="col-md-6">
              <label class="form-label text-muted fw-semibold">Branch</label>
              <select class="form-select border-muted" formControlName="branchId">
                <option value="">Select Branch</option>
                <option *ngFor="let row2 of ALLbranchdata" [value]="row2._id">
                  {{ row2.name }}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-4">
          <!-- Only show "Edit" when form is locked -->
<button *ngIf="!isEditable" class="btn btn-warning px-4" type="button" (click)="enableEditing()">
    Edit
  </button>
  
  <!-- Only show "Update" when editing is enabled -->
  <button *ngIf="isEditable" class="btn btn-success px-4" type="button" (click)="edit()">
    Update
  </button>
  
          
            <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
              Change Password
            </button>
          </div>
          
      </form>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="changePasswordModalLabel">Change Password</h5>
        <span class="text-success">{{ msg1 }}</span>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="form1">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="oldPassword" class="form-label">Old Password <span class="text-danger">*</span></label>
              <input type="password" class="form-control" formControlName="oldPassword" id="oldPassword" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="newPassword" class="form-label">New Password <span class="text-danger">*</span></label>
              <input type="password" class="form-control" formControlName="newPassword" id="newPassword" required>
            </div>
          </div>
          <div class="text-center">
            <button type="button" data-bs-dismiss="modal" class="btn btn-primary" (click)="changePassword()" [disabled]="!form1.valid">
              Submit
            </button>
          </div>
         

        </form>
      </div>
    </div>
  </div>
</div>
